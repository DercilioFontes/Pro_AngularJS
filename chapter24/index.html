<!DOCTYPE html>
<html ng-app="exampleApp">
  <head>
    <title>Components</title>
    <script src="angular.js"></script>
    <link href="bootstrap.css" rel="stylesheet" />
    <link href="bootstrap-theme.css" rel="stylesheet" />
    <script>
      angular
        .module("exampleApp", [])
        .controller("defaultCtrl", function ($scope, $rootElement) {
          console.log($rootElement);

          let counter = 0;

          const logClick = function ($log, $exceptionHandler, message) {
            console.log(counter);

            if (counter === 0) {
              $log.log(message);
              counter++;
            } else {
              $exceptionHandler("Already clicked");
            }
          };

          $scope.handleClick = function () {
            // const deps = $injector.annotate(logClick);
            // const args = [];
            // for (const dep of deps) {
            //   if ($injector.has(dep)) {
            //     args.push($injector.get(dep));
            //   } else if (dep === "message") {
            //     args.push("Button  Clicked");
            //   }
            // }

            // logClick.apply(null, args);

            const localVars = { message: "Button Clicked" };
            $rootElement.injector().invoke(logClick, null, localVars);
          };
        });
    </script>
  </head>
  <body ng-controller="defaultCtrl">
    <div class="well">
      <button class="btn btn-primary" ng-click="handleClick()">
        Click Me!
      </button>
    </div>
  </body>
</html>
